# Solution Proposal

Step D.3: 해결책 제안 (Solution Proposal)

## 설명

분석된 근본 원인을 바탕으로 구체적인 해결책을 제시합니다. 기존 코드의 구조와 스타일을 유지하면서 문제를 해결하는 수정 방법을 안내합니다.

## 트리거

- Step D.2 (Root Cause Analysis) 완료 후 자동 실행
- `outputs/debugging/root-cause.md` 파일이 존재할 때

## 입력

- `outputs/debugging/root-cause.md` - 원인 분석 리포트
- `outputs/debugging/error-report.md` - 에러 리포트
- 문제가 되는 소스 코드
- 프로젝트의 기존 코드 (스타일 참조용)

## 실행 내용

### 해결책 도출 프로세스

```
1. 근본 원인 확인
    ↓
2. 가능한 해결 방법 검토
    ↓
3. 기존 코드 스타일 분석
    ↓
4. 최적의 해결책 선택
    ↓
5. 수정 코드 작성
    ↓
6. 부작용 검토
```

### 해결책 선택 원칙

1. **최소 변경 원칙**
   - 에러 해결에 필요한 최소한의 수정만 제안
   - 불필요한 리팩토링 지양
   - 기존 로직 변경 최소화

2. **일관성 유지 원칙**
   - 기존 코드의 네이밍 컨벤션 유지
   - 기존 패턴과 동일한 방식 사용
   - 들여쓰기, 세미콜론 등 스타일 일치

3. **안전성 원칙**
   - 수정으로 인한 부작용 최소화
   - 기존 기능에 영향 없는지 확인
   - 필요시 타입 안전성 검증

### 에러 유형별 해결 패턴

#### Build Error 해결
```markdown
## Module not found
1. import 경로 수정
2. tsconfig.json paths 설정 추가/수정
3. 누락된 패키지 설치

## Syntax Error
1. 문법 오류 위치 수정
2. 괄호/중괄호 짝 맞춤
3. 세미콜론/콤마 확인
```

#### Type Error 해결
```markdown
## Type mismatch
1. 올바른 타입으로 변환
2. 타입 assertion 추가 (최후의 수단)
3. 타입 정의 수정

## Null/Undefined
1. Optional chaining 추가 (?.)
2. Nullish coalescing 사용 (??)
3. Type guard 추가
```

#### Runtime Error 해결
```markdown
## Cannot read property of undefined
1. null/undefined 체크 추가
2. 초기값 설정
3. Optional chaining 적용

## Async/Promise Error
1. try-catch 추가
2. error handling 개선
3. async/await 흐름 수정
```

### 코드 수정 제시 형식

```markdown
### 수정 방법

**파일:** `{파일 경로}`

**변경 전:**
```{언어}
// 기존 코드 (문제 부분)
{기존 코드}
```

**변경 후:**
```{언어}
// 수정된 코드
{수정된 코드}
```

**수정 이유:**
{왜 이렇게 수정하면 해결되는지 설명}
```

### 대화 원칙

- 해결책을 명확하게 단계별로 설명
- 왜 이 해결책이 효과적인지 간단히 설명
- 복잡한 수정의 경우 하나씩 적용하도록 안내
- 여러 해결책이 있을 경우 가장 단순한 것 먼저 제안

## 산출물

`outputs/debugging/solution.md`

```markdown
# 해결책 제안

## 메타데이터
- Step: D.3 - 해결책 제안
- 생성일시: {현재 시간}
- 상태: final

## 문제 요약

**에러:** {에러 메시지 한 줄 요약}
**원인:** {근본 원인 한 줄 요약}

## 해결책

### 수정 1: {수정 제목}

**파일:** `{파일 경로}`

**변경 전:**
```{언어}
{기존 코드}
```

**변경 후:**
```{언어}
{수정된 코드}
```

**수정 이유:**
{왜 이렇게 수정하면 해결되는지}

---

### 수정 2: {수정 제목} (필요한 경우)

{동일한 형식}

---

## 적용 순서

1. {첫 번째로 적용할 수정}
2. {두 번째로 적용할 수정}
3. {세 번째로 적용할 수정}

## 확인 방법

수정 후 다음 명령으로 에러가 해결되었는지 확인하세요:

```bash
{확인 명령어, 예: npm run build, npm run dev}
```

## 주의 사항

- {수정 시 주의할 점}
- {부작용이 있을 수 있는 부분}

## 예방책

같은 에러 재발 방지를 위해:

- {예방 팁 1}
- {예방 팁 2}

## 다음 단계

→ Step D.4: Fix Verification (수정 검증)
- 수정 적용 후 결과 확인
- 정상 동작 검증
```

## 완료 조건

- 구체적인 수정 방법 제시 완료
- 수정 코드 (변경 전/후) 작성
- 적용 순서 명시
- 확인 방법 안내
- `solution.md` 파일이 생성됨

## 다음 Step

→ Step D.4: Fix Verification (수정 검증)
