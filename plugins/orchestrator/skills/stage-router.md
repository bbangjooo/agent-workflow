# Stage Router

Stage ê°„ ì „í™˜ì„ ê´€ë¦¬í•˜ê³  ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

## ì„¤ëª…

ê° Stageì˜ ì‹œì‘ê³¼ ì™„ë£Œë¥¼ ì²˜ë¦¬í•˜ê³ , ìƒíƒœ íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ë©°, ë‹¤ìŒ Stageë¡œì˜ ì „í™˜ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

## íŠ¸ë¦¬ê±°

- progress-check ìŠ¤í‚¬ ì™„ë£Œ í›„
- Stage ì™„ë£Œ ì‹œ ìë™ í˜¸ì¶œ

## Stage ì •ë³´

| Stage | Phase ID | ì»¤ë§¨ë“œ/ìŠ¤í‚¬ | ì™„ë£Œ ì‚°ì¶œë¬¼ |
|-------|----------|-------------|-------------|
| 0 | ideation | `/ideate` | `outputs/stage-0/idea-brief.md` |
| 1 | planning | `/plan` | `outputs/stage-1/prd.md` |
| 2 | design | `/design` | `outputs/stage-2/design-spec.md` |
| 3 | development | `/develop` | `outputs/stage-3/build-config.md` |
| 4 | deployment | `/deploy` | `outputs/stage-4/deployment-complete.md` |

> **Note**: Design-to-Dev BridgeëŠ” Stage 3 (Development)ì˜ ì²« ë²ˆì§¸ Step(3.1)ìœ¼ë¡œ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤. `/develop` ì»¤ë§¨ë“œ ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

## ì‹¤í–‰ ë‚´ìš©

### 1. Stage ì‹œì‘

Stageë¥¼ ì‹œì‘í•  ë•Œ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…:

```
1. ìƒíƒœ íŒŒì¼ ì—…ë°ì´íŠ¸:
   - phases[n].status = "in_progress"
   - phases[n].startedAt = í˜„ì¬ì‹œê°„ (ìµœì´ˆ ì‹œì‘ ì‹œ)
   - phases[n].lastModifiedAt = í˜„ì¬ì‹œê°„
   - currentPhaseId = phases[n].id
   - lastModifiedAt = í˜„ì¬ì‹œê°„

2. ì‹œì‘ ë©”ì‹œì§€ ì¶œë ¥:
   "ğŸ¯ Stage {N}: {ì´ë¦„}ì„ ì‹œì‘í•©ë‹ˆë‹¤."

3. í•´ë‹¹ Stage ì»¤ë§¨ë“œ í˜¸ì¶œ:
   /ideate, /plan, /design, /develop, /deploy
```

### 2. Stage ì™„ë£Œ í™•ì¸

Stageê°€ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸:

```
1. ì‚°ì¶œë¬¼ íŒŒì¼ ì¡´ì¬ í™•ì¸
2. ì¡´ì¬í•˜ë©´ â†’ Stage ì™„ë£Œ ì²˜ë¦¬
3. ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ â†’ ëŒ€ê¸° (ì‚¬ìš©ìê°€ ì§ì ‘ ì™„ë£Œí•  ë•Œê¹Œì§€)
```

### 3. Stage ì™„ë£Œ ì²˜ë¦¬

Stageê°€ ì™„ë£Œë˜ì—ˆì„ ë•Œ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…:

```
1. ìƒíƒœ íŒŒì¼ ì—…ë°ì´íŠ¸:
   - phases[n].status = "completed"
   - phases[n].completedAt = í˜„ì¬ì‹œê°„
   - phases[n].lastModifiedAt = í˜„ì¬ì‹œê°„
   - phases[n].artifacts = [ì‚°ì¶œë¬¼ ê²½ë¡œ]
   - currentPhaseId = ë‹¤ìŒ phase.id (ë˜ëŠ” null)
   - lastModifiedAt = í˜„ì¬ì‹œê°„

2. ì™„ë£Œ ë©”ì‹œì§€ ì¶œë ¥:
   "âœ… Stage {N} ì™„ë£Œ!"

3. ë‹¤ìŒ Stage í™•ì¸:
   - ë‹¤ìŒ Stageê°€ ìˆìœ¼ë©´ â†’ ë‹¤ìŒ Stage ì‹œì‘
   - ì—†ìœ¼ë©´ (Stage 4 ì™„ë£Œ) â†’ ì „ì²´ ì™„ë£Œ ì²˜ë¦¬
```

### 4. ì „ì²´ ì™„ë£Œ ì²˜ë¦¬

ëª¨ë“  Stageê°€ ì™„ë£Œë˜ì—ˆì„ ë•Œ:

```
1. ìµœì¢… ê²°ê³¼ ìš”ì•½ ì¶œë ¥
2. ë¼ì´ë¸Œ URL í‘œì‹œ
3. ì¶•í•˜ ë©”ì‹œì§€
```

## ìƒíƒœ ì—…ë°ì´íŠ¸ ì˜ˆì‹œ

### Stage ì‹œì‘ ì‹œ

`.workflow/state.json` ë³€ê²½:

```json
{
  "lastModifiedAt": "2024-01-15T10:30:00.000Z",
  "currentPhaseId": "planning",
  "phases": [
    {
      "id": "ideation",
      "status": "completed",
      ...
    },
    {
      "id": "planning",
      "status": "in_progress",
      "startedAt": "2024-01-15T10:30:00.000Z",
      "lastModifiedAt": "2024-01-15T10:30:00.000Z",
      ...
    },
    ...
  ]
}
```

### Stage ì™„ë£Œ ì‹œ

```json
{
  "lastModifiedAt": "2024-01-15T12:00:00.000Z",
  "currentPhaseId": "design",
  "phases": [
    ...
    {
      "id": "planning",
      "status": "completed",
      "startedAt": "2024-01-15T10:30:00.000Z",
      "completedAt": "2024-01-15T12:00:00.000Z",
      "lastModifiedAt": "2024-01-15T12:00:00.000Z",
      "artifacts": ["outputs/stage-1/prd.md"]
    },
    {
      "id": "design",
      "status": "in_progress",
      "startedAt": "2024-01-15T12:00:00.000Z",
      ...
    },
    ...
  ]
}
```

## ì¶œë ¥ ë©”ì‹œì§€

### Stage ì‹œì‘

```
ğŸ¯ Stage {N}: {ì´ë¦„}ì„ ì‹œì‘í•©ë‹ˆë‹¤.

ì´ ë‹¨ê³„ì—ì„œëŠ”:
- {ì„¤ëª… 1}
- {ì„¤ëª… 2}

---
```

Stageë³„ ì„¤ëª…:

| Stage | ì„¤ëª… |
|-------|------|
| 0 | ì•„ì´ë””ì–´ë¥¼ êµ¬ì²´í™”í•˜ê³  ê²€ì¦í•©ë‹ˆë‹¤ |
| 1 | ê¸°ëŠ¥ì„ ì •ì˜í•˜ê³  PRDë¥¼ ì‘ì„±í•©ë‹ˆë‹¤ |
| 2 | ë””ìì¸ ì‹œìŠ¤í…œê³¼ UI ëª…ì„¸ë¥¼ ë§Œë“­ë‹ˆë‹¤ |
| 3 | ë””ìì¸-ê°œë°œ ë¸Œë¦¿ì§€ ë° ì‹¤ì œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë¹Œë“œí•©ë‹ˆë‹¤ |
| 4 | ë¬´ë£Œ í˜¸ìŠ¤íŒ…ì— ë°°í¬í•©ë‹ˆë‹¤ |

### Stage ì™„ë£Œ

```
âœ… Stage {N}: {ì´ë¦„} ì™„ë£Œ!

ğŸ“„ ì‚°ì¶œë¬¼: {ì‚°ì¶œë¬¼ ê²½ë¡œ}

---

ë‹¤ìŒ: Stage {N+1}: {ë‹¤ìŒ ì´ë¦„}
```

### ì „ì²´ ì™„ë£Œ

```
ğŸ‰ í”„ë¡œì íŠ¸ ë¹Œë“œ ì™„ë£Œ!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š ê²°ê³¼ ìš”ì•½
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ ì‚°ì¶œë¬¼:
â€¢ ì•„ì´ë””ì–´ ë¸Œë¦¬í”„: outputs/stage-0/idea-brief.md
â€¢ PRD: outputs/stage-1/prd.md
â€¢ ë””ìì¸ ëª…ì„¸: outputs/stage-2/design-spec.md
â€¢ ë¹Œë“œ ì„¤ì •: outputs/stage-3/build-config.md
â€¢ ë°°í¬ ì™„ë£Œ: outputs/stage-4/deployment-complete.md

ğŸŒ ë¼ì´ë¸Œ URL: https://{app-name}.vercel.app

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì¶•í•˜í•©ë‹ˆë‹¤! ì•„ì´ë””ì–´ê°€ ì‹¤ì œ ì„œë¹„ìŠ¤ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸŠ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

## ì—ëŸ¬ ì²˜ë¦¬

### Stage ì»¤ë§¨ë“œ ì‹¤íŒ¨ ì‹œ

```
âš ï¸ Stage {N}ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

{ì—ëŸ¬ ë‚´ìš©}

ë‹¤ì‹œ ì‹œë„í•˜ë ¤ë©´ `/{ì»¤ë§¨ë“œ}`ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.
ì „ì²´ ì›Œí¬í”Œë¡œìš°ë¥¼ ì¬ì‹œì‘í•˜ë ¤ë©´ `/build-project`ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.
```

### ì‚°ì¶œë¬¼ ëˆ„ë½ ì‹œ

```
âš ï¸ Stage {N}ì˜ ì‚°ì¶œë¬¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ì˜ˆìƒ íŒŒì¼: {íŒŒì¼ ê²½ë¡œ}

Stageë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•©ë‹ˆë‹¤...
```

## ì™„ë£Œ ì¡°ê±´

- Stage ì‹œì‘ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ
- í•´ë‹¹ Stage ì»¤ë§¨ë“œ í˜¸ì¶œ ì™„ë£Œ
- Stage ì™„ë£Œ ìƒíƒœ ì—…ë°ì´íŠ¸ ì™„ë£Œ
- ë‹¤ìŒ Stageë¡œ ì „í™˜ ë˜ëŠ” ì „ì²´ ì™„ë£Œ

## ê´€ë ¨ ìŠ¤í‚¬

- progress-check: ì‹œì‘ ì§€ì  ê²°ì • í›„ stage-router í˜¸ì¶œ

> **Note**: Design-to-Dev BridgeëŠ” Stage 3 (Development)ì˜ Step 3.1ë¡œ í†µí•©ë˜ì–´ `/develop` ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
